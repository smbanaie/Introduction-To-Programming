# حلقه‌های for: تکرار کد به آسانی

## چه چیزهایی یاد خواهید گرفت
- چگونه با حلقه‌های for کد را چند بار تکرار کنید
- حلقه زدن روی لیست‌ها، رشته‌ها و محدوده‌ها
- استفاده از `range()` برای شمردن
- الگوهای رایج حلقه
- اشتباهات رایج برای اجتناب

---

## مفهوم اصلی: دوباره انجام بده (و دوباره)

یک **حلقه for** به شما اجازه می‌دهد یک بلوک کد را برای هر آیتم در یک دنباله تکرار کنید. به جای نوشتن یک کد ۱۰ بار، یک بار می‌نویسید و به پایتون می‌گویید ۱۰ بار اجرایش کنید.

**مثال: یک دستور آشپزی**
- «برای هر تخم‌مرغ در کارتن، آن را در کاسه بشکن»
- نمی‌گویید: «تخم‌مرغ ۱ را بشکن، تخم‌مرغ ۲ را بشکن، تخم‌مرغ ۳ را بشکن...»
- حلقه خودش تکرار را مدیریت می‌کند!

---

## سینتکس پایه حلقه for

### حلقه زدن روی لیست

```python
میوه‌ها = ["سیب", "موز", "گیلاس", "خرما"]

for میوه in میوه‌ها:
    print(f"من {میوه} را دوست دارم")

# خروجی:
# من سیب را دوست دارم
# من موز را دوست دارم
# من گیلاس را دوست دارم
# من خرما را دوست دارم
```

**نحوه کار:**
۱. حلقه اولین آیتم (`"سیب"`) را می‌گیرد و در `میوه` ذخیره می‌کند
۲. کد تورفتگی را اجرا می‌کند (پیام را چاپ می‌کند)
۳. آیتم بعدی (`"موز"`) را می‌گیرد و تکرار می‌کند
۴. تا پردازش همه آیتم‌ها ادامه می‌دهد

### حلقه زدن روی رشته

```python
پیام = "سلام"

for حرف in پیام:
    print(حرف)

# خروجی:
# س
# ل
# ا
# م
```

---

## تابع range()

### شمردن با range()

```python
# شمردن از ۰ تا ۴ (قبل از ۵ متوقف می‌شود)
for i in range(5):
    print(f"شمارش: {i}")

# خروجی:
# شمارش: 0
# شمارش: 1
# شمارش: 2
# شمارش: 3
# شمارش: 4
```

### شروع از عدد دیگر

```python
# شمردن از ۱ تا ۵
for i in range(1, 6):
    print(f"عدد: {i}")

# خروجی:
# عدد: 1
# عدد: 2
# عدد: 3
# عدد: 4
# عدد: 5
```

### شمردن با گام

```python
# اعداد زوج از ۲ تا ۱۰
for i in range(2, 11, 2):
    print(f"زوج: {i}")

# خروجی:
# زوج: 2
# زوج: 4
# زوج: 6
# زوج: 8
# زوج: 10
```

### شمردن معکوس

```python
# شمردن معکوس از ۵ تا ۱
for i in range(5, 0, -1):
    print(f"شمارش معکوس: {i}")

print("پرتاب!")
```

---

## الگوهای عملی حلقه

### الگوی ۱: تجمیع (جمع کردن چیزها)

```python
# محاسبه مجموع اعداد
اعداد = [10, 20, 30, 40, 50]
مجموع = 0

for عدد in اعداد:
    مجموع = مجموع + عدد
    # یا: مجموع += عدد

print(f"مجموع: {مجموع}")  # 150
```

### الگوی ۲: شمارنده (شمردن تطابق‌ها)

```python
# شمردن چند آیتم از یک آزمون عبور می‌کنند
نمرات = [85, 92, 78, 95, 88, 70]
تعداد_قبول = 0

for نمره in نمرات:
    if نمره >= 70:
        تعداد_قبول += 1

print(f"دانشجویان قبول: {تعداد_قبول}")
```

### الگوی ۳: پیدا کردن بیشترین/کمترین

```python
# پیدا کردن بالاترین نمره
نمرات = [85, 92, 78, 95, 88, 70]
بالاترین = نمرات[0]  # شروع با اولین نمره

for نمره in نمرات[1:]:  # بررسی بقیه
    if نمره > بالاترین:
        بالاترین = نمره

print(f"بالاترین نمره: {بالاترین}")
```

### الگوی ۴: ساخت لیست جدید

```python
# ایجاد لیست جدید از یک لیست موجود
نام‌ها = ["علی", "رضا", "محمد"]
نام‌های_بزرگ = []

for نام in نام‌ها:
    نام‌های_بزرگ.append(نام.upper())

print(نام‌های_بزرگ)  # ['ALI', 'REZA', 'MOHAMMAD']
```

---

## استفاده از enumerate() برای ایندکس

### گرفتن هم ایندکس و هم مقدار

```python
میوه‌ها = ["سیب", "موز", "گیلاس"]

for ایندکس, میوه in enumerate(میوه‌ها):
    print(f"{ایندکس}: {میوه}")

# خروجی:
# 0: سیب
# 1: موز
# 2: گیلاس
```

### شروع از ۱ به جای ۰

```python
# برای لیست‌های شماره‌دار (مثل رتبه‌بندی)
for رتبه, میوه in enumerate(میوه‌ها, start=1):
    print(f"{رتبه}. {میوه}")

# خروجی:
# 1. سیب
# 2. موز
# 3. گیلاس
```

---

## اشتباهات رایج مبتدی‌ها

### اشتباه ۱: تغییر لیست در حین حلقه زدن روی آن

```python
# ❌ اشتباه - این کار را نکنید!
اعداد = [1, 2, 3, 4, 5]
for عدد in اعداد:
    if عدد % 2 == 0:  # اگر زوج باشد
        اعداد.remove(عدد)  # بعضی آیتم‌ها را رد می‌کند!

print(اعداد)  # [1, 3, 5] - اما 4 رد شد!

# ✅ درست - لیست جدید بسازید
زوج‌ها = []
for عدد in اعداد:
    if عدد % 2 == 0:
        زوج‌ها.append(عدد)
```

### اشتباه ۲: فراموش کردن دو نقطه

```python
# ❌ اشتباه
for i in range(5)
    print(i)

# ✅ درست
for i in range(5):
    print(i)
```

### اشتباه ۳: خطای تورفتگی

```python
# ❌ اشتباه
for i in range(5):
print(i)  # تورفتگی ندارد!

# ✅ درست
for i in range(5):
    print(i)  # تورفتگی صحیح
```

### اشتباه ۴: پارامترهای اشتباه range

```python
# ❌ گیج‌کننده
# range(end) - از ۰ شروع، قبل از end متوقف می‌شود
for i in range(5):  # ۰، ۱، ۲، ۳، ۴ (نه ۵!)
    print(i)

# range(start, end) - از start شروع، قبل از end متوقف می‌شود
for i in range(1, 5):  # ۱، ۲، ۳، ۴ (نه ۵!)
    print(i)
```

### اشتباه ۵: استفاده مجدد از متغیر حلقه

```python
# ❌ رفتار غیرمنتظره
for i in range(5):
    print(i)

# i هنوز بعد از حلقه وجود دارد!
print(f"مقدار نهایی i: {i}")  # چاپ می‌کند ۴
```

---

## خودتان امتحان کنید: تمرین‌ها

### تمرین ۱: جدول ضرب

جدول ضرب برای یک عدد چاپ کنید:

```python
عدد = int(input("یک عدد وارد کن: "))

print(f"جدول ضرب برای {عدد}:")
for i in range(1, 11):
    نتیجه = عدد * i
    print(f"{عدد} × {i} = {نتیجه}")
```

### تمرین ۲: مجموع خرید

مجموع لیست خرید را محاسبه کنید:

```python
قیمت‌ها = [2.50, 3.75, 1.25, 8.99, 4.50]
مجموع = 0

print("لیست خرید شما:")
for i, قیمت in enumerate(قیمت‌ها, 1):
    print(f"  کالای {i}: ${قیمت:.2f}")
    مجموع += قیمت

print(f"\nمجموع: ${مجموع:.2f}")

# اضافه کردن مالیات
مالیات = مجموع * 0.08
نهایی = مجموع + مالیات
print(f"مالیات (۸٪): ${مالیات:.2f}")
print(f"نهایی: ${نهایی:.2f}")
```

### تمرین ۳: بررسی قدرت رمز عبور

بررسی هر حرف در یک رمز عبور:

```python
رمز = input("رمز عبور وارد کن: ")

عدد_دارد = False
حرف_بزرگ_دارد = False
حرف_کوچک_دارد = False

for حرف in رمز:
    if حرف.isdigit():
        عدد_دارد = True
    elif حرف.isupper():
        حرف_بزرگ_دارد = True
    elif حرف.islower():
        حرف_کوچک_دارد = True

# بررسی نتایج
if len(رمز) >= 8 and عدد_دارد and حرف_بزرگ_دارد and حرف_کوچک_دارد:
    print("✅ رمز عبور قوی!")
else:
    print("❌ رمز عبور ضعیف!")
    if len(رمز) < 8:
        print("  - خیلی کوتاه (۸+ کاراکتر لازم است)")
    if not عدد_دارد:
        print("  - یک عدد اضافه کنید")
    if not حرف_بزرگ_دارد:
        print("  - یک حرف بزرگ اضافه کنید")
    if not حرف_کوچک_دارد:
        print("  - یک حرف کوچک اضافه کنید")
```

### تمرین ۴: رفع اشکالات

```python
# برنامه با اشکال
اعداد = [1, 2, 3, 4, 5]
for عدد in range(اعداد):
    print(اعداد)

مجموع = 0
for i in range(1, 10)
    مجموع = مجموع + i
print(f"جمع ۱ تا ۱۰: {مجموع}")
```

<details>
<summary>برای دیدن پاسخ کلیک کنید</summary>

```python
# برنامه رفع شده
اعداد = [1, 2, 3, 4, 5]
for عدد in اعداد:  # روی لیست حلقه بزنید، نه range(list)
    print(عدد)  # عدد را چاپ کنید، نه اعداد

مجموع = 0
for i in range(1, 11):  # : لازم است و range تا عدد پایانی می‌رود
    مجموع = مجموع + i
print(f"جمع ۱ تا ۱۰: {مجموع}")
```
</details>

---

## مرجع سریع

### حلقه for پایه

```python
# حلقه روی لیست
for آیتم in لیست:
    # کد

# حلقه با range
for i in range(5):      # 0، 1، 2، 3، 4
for i in range(1, 6):  # 1، 2، 3، 4، 5
for i in range(0, 10, 2):  # 0، 2، 4، 6، 8
```

### تابع range()

| سینتکس | تولید می‌کند |
|--------|-------------|
| `range(5)` | 0، 1، 2، 3، 4 |
| `range(2, 5)` | 2، 3، 4 |
| `range(0, 10, 2)` | 0، 2، 4، 6، 8 |
| `range(5, 0, -1)` | 5، 4، 3، 2، 1 |

### الگوهای رایج

| الگو | کد |
|------|-----|
| جمع آیتم‌ها | `مجموع = 0`<br>`for x in items: مجموع += x` |
| شمردن تطابق‌ها | `شمارنده = 0`<br>`for x in items:`<br>`  if شرط: شمارنده += 1` |
| پیدا کردن بیشترین | `بیشترین = items[0]`<br>`for x in items[1:]:`<br>`  if x > بیشترین: بیشترین = x` |
| ساخت لیست جدید | `جدید = []`<br>`for x in قدیمی: جدید.append(تبدیل(x))` |

---

## نکات کلیدی

۱. **حلقه‌های for** کد را برای هر آیتم در یک دنباله تکرار می‌کنند
۲. **`range(n)`** اعداد ۰ تا n-1 تولید می‌کند
۳. **`range(start, end)`** اعداد start تا end-1 تولید می‌کند
۴. **`enumerate()`** هم ایندکس و هم مقدار را می‌دهد
۵. **لیست را تغییر ندهید** در حین حلقه زدن روی آن
۶. **دو نقطه را فراموش نکنید** `:` در انتهای خط for
۷. **تورفتگی مهم است**—کد تورفتگی در هر تکرار اجرا می‌شود

---

## گام بعدی

حالا که حلقه‌های for را می‌شناسید:
- درباره حلقه‌های while یاد می‌گیرید (حلقه‌هایی که در حالی که یک شرط درست است اجرا می‌شوند)
- یاد می‌گیرید حلقه‌ها را با `break` و `continue` کنترل کنید
- حلقه‌ها را با شرایط ترکیب می‌کنید برای برنامه‌های قدرتمند
