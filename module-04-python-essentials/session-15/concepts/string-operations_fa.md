# عملیات رشته: کار با متن

## چه چیزهایی یاد خواهید گرفت
- نحوه ایجاد و استفاده از رشته‌ها در پایتون
- نحوه دسترسی به کاراکترهای فردی در یک رشته
- نحوه ترکیب و دستکاری رشته‌ها
- روش‌های ضروری رشته برای وظایف روزمره

## رشته چیست؟ (مثال رشته مهره‌ها)

**رشته** را مانند یک رشته مهره در نظر بگیرید - هر کاراکتر (حرف، عدد یا نماد) یک مهره است و همه به ترتیب خاصی به هم متصل شده‌اند.

در پایتون، ما از رشته‌ها برای کار با متن استفاده می‌کنیم:

```python
# رشته‌ها متن داخل نقل‌قول هستند
name = "علی"           # نقل‌قول دوگانه
city = 'تهران'        # نقل‌قول تکی هم کار می‌کند!
sentence = "پایتون سرگرم‌کننده است!"
```

### چرا رشته‌ها مهم هستند

رشته‌ها در برنامه‌نویسی همه‌جا هستند:
- نمایش پیام به کاربران
- خواندن ورودی کاربر
- کار با نام، ایمیل و آدرس
- ایجاد خروجی قالب‌بندی‌شده

---

## ایجاد رشته‌ها

### سه روش برای ایجاد رشته‌ها

```python
# روش ۱: نقل‌قول تکی (عالی برای متن ساده)
message = 'سلام، دنیا!'

# روش ۲: نقل‌قول دوگانه (وقتی متن دارای آپاستروف است)
quote = "نگران نباش، شاد باش!"

# روش ۳: نقل‌قول سه‌تایی (برای متن چندخطی)
poem = """گل‌ها قرمزند
بنفشه‌ها آبی
پایتون عالی است
و تو هم عالی!"""
```

### تبدیل اعداد به رشته

```python
# اعداد می‌توانند رشته شوند
age = 25
age_text = str(age)           # "25"

price = 19900
price_text = str(price)       # "19900"
```

---

## دسترسی به کاراکترها

### درک موقعیت‌های اندیس

هر کاراکتر در یک رشته یک شماره موقعیت دارد که از ۰ شروع می‌شود:

```
رشته:    پ  ا  ی  ت  و  ن
اندیس:   ۰  ۱  ۲  ۳  ۴  ۵
```

```python
word = "پایتون"

# دسترسی با اندیس (موقعیت)
first_letter = word[0]    # 'پ'
second_letter = word[1]   # 'ا'
last_letter = word[5]     # 'ن'
```

### اندیس منفی (شمردن از انتها)

```python
word = "پایتون"

# اندیس‌های منفی از انتها می‌شمارند
last = word[-1]           # 'ن' (آخرین کاراکتر)
second_last = word[-2]    # 'و' (دومین از آخر)
```

### گرفتن طول

```python
text = "سلام، دنیا!"
length = len(text)        # ۱۳ (هر کاراکتر را می‌شمارد)
```

---

## برش رشته: گرفتن بخش‌هایی از رشته

برش یعنی استخراج بخشی از یک رشته:

```python
text = "برنامه‌نویسی پایتون"

# نحو: رشته[شروع:پایان] (پایان شامل نمی‌شود)
substring = text[0:8]     # "برنامه‌" (موقعیت‌های ۰ تا ۷)

# از شروع تا موقعیت ۸
beginning = text[:8]       # "برنامه‌"

# از موقعیت ۸ تا انتها
ending = text[8:]          # "نویسی پایتون"
```

### مثال‌های کاربردی برش

```python
# گرفتن پسوند فایل
filename = "document.pdf"
extension = filename[-3:]   # "pdf" (۳ کاراکتر آخر)

# حذف پسوند
name_only = filename[:-4]   # "document" (به جز ۴ کاراکتر آخر)

# گرفتن نام کوچک از نام کامل
full_name = "علی احمدی"
first_name = full_name[:3]  # "علی"
```

---

## عملیات پایه رشته

### ۱. اتصال: پیوستن رشته‌ها

```python
# استفاده از + برای پیوستن رشته‌ها
first_name = "علی"
last_name = "احمدی"
full_name = first_name + " " + last_name
# نتیجه: "علی احمدی"

# پیوستن با متن دیگر
greeting = "سلام، " + first_name + "!"
# نتیجه: "سلام، علی!"
```

### ۲. تکرار: تکرار رشته‌ها

```python
# استفاده از * برای تکرار رشته‌ها
line = "=" * 20
# نتیجه: "===================="

# ایجاد یک الگو
stars = "* " * 5
# نتیجه: "* * * * * "
```

### ۳. بررسی اینکه آیا متن داخل رشته است

```python
text = "پایتون شگفت‌انگیز است"

# بررسی اینکه آیا زیررشته وجود دارد
"پایتون" in text      # True
"جاوا" in text        # False

# بررسی اینکه آیا در رشته نیست
"سی++" not in text     # True
```

---

## روش‌های ضروری رشته

روش‌ها عمل‌هایی هستند که می‌توانید روی رشته‌ها انجام دهید. آنها را مانند ابزارهای داخلی در نظر بگیرید.

### تغییر حروف بزرگ و کوچک

```python
text = "سلام دنیا"

# تبدیل به حروف بزرگ
shouting = text.upper()         # "سلام دنیا"

# تبدیل به حروف کوچک
quiet = text.lower()            # "سلام دنیا"

# بزرگ کردن حرف اول هر کلمه
title = text.title()            # "سلام دنیا"
```

### جستجو و شمارش

```python
text = "پایتون قدرتمند است. پایتون آسان است."

# پیدا کردن اولین وقوع (موقعیت یا -۱ را برمی‌گرداند)
position = text.find("پایتون")      # ۰
text.find("جاوا")       # -۱ (یافت نشد)

# شمارش وقوع‌ها
count = text.count("پایتون")          # ۲
```

### جایگزینی متن

```python
text = "من جاوا را دوست دارم"

# جایگزینی همه وقوع‌ها
new_text = text.replace("جاوا", "پایتون")
# نتیجه: "من پایتون را دوست دارم"

# حذف کاراکترها با جایگزینی با هیچ
clean = "سلام، دنیا!".replace("،", "").replace("!", "")
# نتیجه: "سلام دنیا"
```

### شکستن و پیوستن

```python
# شکستن رشته به لیست
sentence = "پایتون سرگرم‌کننده است"
words = sentence.split()          # ["پایتون", "سرگرم‌کننده", "است"]

# شکستن بر اساس کاراکتر خاص
csv_data = "علی,۲۵,مهندس"
parts = csv_data.split(",")       # ["علی", "۲۵", "مهندس"]

# پیوستن لیست به رشته
words = ["سلام", "دنیا"]
sentence = " ".join(words)         # "سلام دنیا"
```

### حذف فضای خالی

```python
text = "   سلام دنیا   "

# حذف از هر دو طرف
clean = text.strip()        # "سلام دنیا"

# حذف فقط از سمت چپ
left_clean = text.lstrip()  # "سلام دنیا   "
```

---

## اشتباهات رایج مبتدی‌ها

### اشتباه ۱: ترکیب اعداد و رشته‌ها

```python
# ❌ اشتباه - ترکیب اعداد و رشته‌ها باعث خطا می‌شود
message = "من " + 25 + " سال دارم"  # خطا!

# ✅ درست - تبدیل عدد به رشته اول
message = "من " + str(25) + " سال دارم"  # "من 25 سال دارم"

# ✅ بهتر - استفاده از f-string
message = f"من {25} سال دارم"
```

### اشتباه ۲: اندیس خارج از محدوده

```python
# ❌ اشتباه - اندیس وجود ندارد
word = "سلام"
letter = word[10]   # خطا! IndexError

# ✅ درست - بررسی طول اول
if len(word) > 10:
    letter = word[10]
else:
    print("کلمه خیلی کوتاه است!")

# ✅ یا روش امن‌تر
word = "سلام"
letter = word[-1]  # همیشه آخرین کاراکتر را ایمن می‌گیرد
```

### اشتباه ۳: فراموش کردن اینکه رشته‌ها تغییرناپذیرند

```python
# ❌ اشتباه - رشته‌ها نمی‌توانند در محل تغییر کنند
text = "سلام"
text[0] = "ص"   # خطا! TypeError

# ✅ درست - ایجاد رشته جدید
text = "ص" + text[1:]   # "صلام"
```

### اشتباه ۴: اشتباه گرفتن find() و index()

```python
text = "سلام"

# ✅ find() اگر یافت نشد -۱ برمی‌گرداند (ایمن)
result = text.find("م")   # -۱

# ❌ index() اگر یافت نشد استثناء می‌دهد
result = text.index("م")   # خطا! ValueError
```

---

## امتحان کنید: تمرین‌ها

### تمرین ۱: قالب‌بندی نام
تابعی بنویسید که نام کامل را بگیرد و در قالب "نام خانوادگی، نام کوچک" برگرداند.

```python
def format_name(full_name):
    # پیدا کردن موقعیت فاصله
    space_pos = full_name.find(" ")
    # تقسیم به نام و نام خانوادگی
    first = full_name[:space_pos]
    last = full_name[space_pos + 1:]
    # برگرداندن در قالب "نام خانوادگی، نام"
    return last + "، " + first

# تست
print(format_name("علی احمدی"))  # باید چاپ کند: "احمدی، علی"
```

### تمرین ۲: استخراج‌کننده نام کاربری
نام کاربری را از آدرس ایمیل استخراج کنید (هر چیزی قبل از @).

```python
def get_username(email):
    # پیدا کردن نماد @
    at_pos = email.find("@")
    # برگرداندن همه چیز قبل از آن
    return email[:at_pos]

# تست
print(get_username("ali@example.com"))  # باید چاپ کند: "ali"
```

### تمرین ۳: تکرارکننده پیام
تابعی ایجاد کنید که یک پیام را با حاشیه تکرار کند.

```python
def repeat_message(message, count):
    border = "-" * 20
    repeated = (message + "\n") * count
    return border + "\n" + repeated + border

# تست
print(repeat_message("سلام!", 3))
```

---

## مرجع سریع

| کار | روش/عملیات | مثال |
|------|----------|------|
| گرفتن طول | `len(s)` | `len("سلام")` → ۴ |
| دسترسی به کاراکتر | `s[i]` | `"سلام"[0]` → 'س' |
| برش | `s[شروع:پایان]` | `"سلام"[1:3]` → 'لا' |
| اتصال رشته‌ها | `+` | `"سلام" + "!"` → 'سلام!' |
| تکرار | `*` | `"ها" * 3` → 'هاهاها' |
| پیدا کردن زیررشته | `s.find()` | `"abc".find("b")` → ۱ |
| جایگزینی | `s.replace()` | `"a,b".replace(",", "-")` → 'a-b' |
| شکستن | `s.split()` | `"a b".split()` → ['a', 'b'] |
| پیوستن لیست | `sep.join()` | `"-".join(['a','b'])` → 'a-b' |
| حروف بزرگ | `s.upper()` | `"salam".upper()` → 'SALAM' |
| حروف کوچک | `s.lower()` | `"SALAM".lower()` → 'salam' |
| حذف فضای خالی | `s.strip()` | `" hi ".strip()` → 'hi' |

---

## نکات کلیدی

۱. **رشته‌ها توالی کاراکترها هستند** - می‌توانید با اندیس‌ها به کاراکترهای فردی دسترسی داشته باشید
۲. **اندیس از ۰ شروع می‌شود** - اولین کاراکتر در موقعیت ۰ است
۳. **برش رشته‌های جدید ایجاد می‌کند** - از `[شروع:پایان]` برای استخراج زیررشته استفاده کنید
۴. **رشته‌ها تغییرناپذیرند** - روش‌ها رشته‌های جدید برمی‌گردانند، اصلی را تغییر نمی‌دهند
۵. **از ابزار درست استفاده کنید** - پایتون روش‌های داخلی زیادی برای رشته‌ها دارد

## قدم بعدی چیست؟

در درس بعدی، درباره **قالب‌بندی رشته** یاد خواهید گرفت - چگونه خروجی حرفه‌ای با متغیرها، اعداد و متن قالب‌بندی‌شده ایجاد کنید. درباره f-string یاد خواهید گرفت، روش مدرن قالب‌بندی رشته‌ها در پایتون.
